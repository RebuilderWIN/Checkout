<%
   unless f.object.new_record?
    kit = KitDecorator.decorate(f.object.kit)
   end
%>

<%= content_tag :div, f.error(:base), :class=>"alert alert-error span12" if f.error(:base) %>

<% if f.object.new_record? %>
  <div class="field span6">
    <%= f.input :kit_id,
                :label => false,
                :wrapper_html => { :class => 'table-form' },
                :input_html => {
                    :class => 'select2-json-autocomplete select-kit',
                    :hidden => true,
                    "data-ajax-url" => select2_kits_path(:format => :json, :group_id =>  @group.id)
                } %>
  </div>
<% else %>
  <div class="field span2">
    <%= kit.asset_tags %>
    <%= f.input :kit_id, :as => :hidden %>
  </div>
  <div class="field span4"><%= kit.component_list %></div>
<% end %>

  <div class="field span4">
    <%= f.input :expires_at,
                :as => :date_picker,
                :label => false,
                :wrapper_html => {
                  :class => 'table-form'
                },
                :input_html => {
                    :class => "generic_datepicker",
                    :value => (f.object.new_record? || f.object.nil?) ? nil : f.object.expires_at
                } %>
  </div>
  <div class="field span2"><%= f.link_to_remove "Delete", :class => "btn btn-danger" %></div>
