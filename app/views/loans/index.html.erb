<% title 'loan.title' %>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Client</th>
      <th>Kit</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Out Date</th>
      <th>In Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @loans.each do |loan| %>
      <tr>
        <td><%= link_to loan.client, users_loans_path(loan.client) unless loan.client.nil? %>
        <td><%= link_to loan.kit, kit_path(loan.kit) unless loan.kit.nil? %></td>
        <td><%= loan.starts_at.to_s(:tabular) %></td>
        <td><%= loan.ends_at.to_s(:tabular) %></td>
        <td><%= loan.out_at.try(:to_s, :tabular) %></td>
        <td><%= loan.in_at.try(:to_s, :tabular) %></td>
        <td>
          <div class="btn-group">
            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
              <i class="icon-cog"></i>
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li>
                <%= link_to loan_path(loan) do %>
                  <i class="icon-info-sign"></i>
                  Show
                <% end %>
              </li>
              <li>
                <%= link_to edit_loan_path(loan)  do %>
                  <i class="icon-pencil"></i>
                  Edit
                <% end %>
              </li>
              <li class="divider"></li>
              <li>
                <%= link_to loan_path(loan), :method => :delete, :confirm => 'Are you sure?' do %>
                  <i class="icon-trash"></i>
                  Delete
                <% end %>
              </li>
            </ul>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%# TODO: this should feed into some sort of wizard - 1) select equipment, 2) select client, 3) new loan %>
<%#= link_to 'New', new_loan_path, :class => 'btn btn-primary' %>
